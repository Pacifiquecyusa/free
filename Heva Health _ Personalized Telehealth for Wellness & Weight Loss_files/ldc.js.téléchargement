(()=>{let r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));let a,o=new Uint8Array(16),n={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function t(e,t){if(n.randomUUID&&!t&&!e)return n.randomUUID();var t=(e=e||{}).random??e.rng?.()??(()=>{if(!a){if("u"<typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(o)})();if(t.length<16)throw new Error("Random bytes length must be >= 16");return t[6]=15&t[6]|64,t[8]=63&t[8]|128,e=t,t=0,(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}class e{userId;aid;apiUrl="https://tag.link-url.io";pixelIds=["93ab8b20dba17645d9c3221c1ce61ef9ad1ec91038ced621cad0cb3c8e8ac59e","fa051a4780a18b513a053149de035be70d09f370da012d12a92e9cceecfc5f89"];timestampnow=(new Date).toISOString();uniqueUserId;externalId=null;constructor(e){this.aid=e.aid,this.userId=e.userId,this.uniqueUserId=(()=>{try{if("u"<typeof localStorage)throw console.warn("localStorage is not available."),new Error("localStorage is unavailable");let e=localStorage.getItem("bpuid");return e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)||(e=t(),localStorage.setItem("bpuid",e)),e}catch(e){return console.error("Error accessing localStorage or generating unique ID:",e),t()}})(),this.init()}init(){this.sendAnalyticsBeacon(),window.addEventListener("popstate",()=>{this.sendAnalyticsBeacon()});let t=history.pushState;var e,r,a,o;history.pushState=(...e)=>{t.apply(history,e),this.sendAnalyticsBeacon()},e=this.pixelIds,r=this.uniqueUserId,a=this.userId,o=this.timestampnow,e.forEach(t=>{var e;document.querySelector(`script[src*="${t}"]`)?console.log(`Browser speed script for PID ${t} already loaded.`):((e=document.createElement("script")).src=`https://a.usbrowserspeed.com/cs?pid=${t}&puid=`+(r+`|${a}|`+o),e.type="text/javascript",e.async=!0,e.onerror=e=>{console.error(`Failed to load browser speed script for PID ${t}:`,e)},document.head.appendChild(e))})}async sendAnalyticsBeacon(){try{var e=await(async()=>{try{var e=await(await fetch("https://pro.ip-api.com/json/?key=4aPS27SAdIyXc0H")).json();return{ip:e.query||"unknown",countryCode:e.countryCode||"unknown"}}catch(e){return console.error("Failed to fetch IP details:",e),{ip:"unknown",countryCode:"unknown"}}})(),t={pid:this.userId,aid:this.aid,url:window.location.href,referrer:document.referrer||null,ip:e.ip,countryCode:e.countryCode,timestamp:this.timestampnow,externalId:this.externalId,uniqueUserId:this.uniqueUserId},r=JSON.stringify(t);navigator.sendBeacon?navigator.sendBeacon(this.apiUrl,r):await fetch(this.apiUrl,{method:"POST",body:r,credentials:"include"})}catch(e){console.error("Error sending analytics beacon:",e)}}identify(e){this.externalId=e}blockConsent(){}}try{var i=document.currentScript;if(!i)throw new Error("AnalyticsBeacon script tag not found.");var s,c=new URL(i.src).searchParams,d=c.get("pid")||"MISSING-PID",l=c.get("aid")||"MISSING-AID";"MISSING-PID"===d||"MISSING-AID"===l?console.warn((`Missing required parameters: ${"MISSING-PID"===d?"userId":""} `+("MISSING-AID"===l?"aid":"")).trim()):console.log(`instrument ${d} `+l),"MISSING-PID"!==d&&"MISSING-AID"!==l&&(s=new e({userId:d,aid:l}),window.analytics=s)}catch(e){console.error("Failed to initialize AnalyticsBeacon:",e)}})();